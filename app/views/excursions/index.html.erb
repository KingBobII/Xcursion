<div class="container my-4" data-controller="search-excursions">
  <h1>Suggested Things To Do:</h1>
  <%= form_with url: excursions_path, method: :get, html: {class: "mb-4", data: {search_excursions_target: "form"}} do |f|%>
    <%= f.text_field :query,
                      placeholder: 'Search for excursions...',
                      class: "form-control",
                      value: params[:query],
                      data: {search_excursions_target: "input",
                            action: "keyup->search-excursions#update"}
                      %>
    <%= f.submit 'Search', class: "btn btn-primary mt-2", data: { action: "submit->search-excursions#search" } %>
  <% end %>

  <script>
    const cloudinaryImageUrl = "<%= cl_image_path('your_image_key', { class: 'excursion-image', alt: 'Image of an Excursion', crop: :fill }) %>";
  </script>

<%= javascript_include_tag 'controllers/search_excursions_controller' %>

  <div class="grid-container" data-search-excursions-target="list">
    <% if @excursions.present? %>
      <% @excursions.each do |excursion| %>
        <%= link_to excursion_path(excursion), class: "excursion-link" do %>
          <div class="excursion-card item">
            <h3 class="excursion-title"><%= excursion[:title] %></h3>
            <% if excursion.image.present? %>
              <%= cl_image_tag excursion.image.key, class: "excursion-image", alt: "Image of an Excursion", crop: :fill %>
            <% else %>
              <%#= image_tag "https://www.xcursionrisk.com/uploads/1/0/4/5/10451400/xcursion-green-dot.png", class: "excursion-image" %>
              <%= image_tag "https://source.unsplash.com/800x600/?excursion,#{excursion.title.parameterize}", class: "excursion-image" %>
            <% end %>
            <p><strong>City:</strong> <%= excursion[:city] %></p>
            <p><strong>Category:</strong> <%= excursion[:category] %></p>
            <p><strong>Description:</strong> <%= excursion[:description] %></p>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <p>No excursions found.</p>
    <% end %>
  </div>
</div>
